var res;function responsive(){var b=this;b.jRes;b.mobile=false;b.collapse=false;this.setResponsive=function(){b.jRes=jRespond([{label:"phone",enter:0,exit:799},{label:"tab",enter:800,exit:1023},{label:"laptop",enter:1024,exit:1279},{label:"desktop",enter:1280,exit:100000}]);b.jRes.addFunc({breakpoint:"desktop",enter:function(){$(".fm_left_content").show();$(".fm_right_content").show();$(".fm_close.fm_hide").hide();b.collapse=false;console.log(">>> desktop enter <<<")},exit:function(){$(".fm_close.fm_hide").show();b.collapse=true;console.log("<<< desktop exit >>>")}});b.jRes.addFunc({breakpoint:"laptop",enter:function(){$(".fm_left_content").show();$(".fm_right_content").show();$(".fm_left_content.collapse_first").hide();$(".fm_right_content.collapse_first").hide();$(".fm_close.fm_hide").hide();b.collapse=false;console.log(">>> laptop enter <<<")},exit:function(){$(".fm_close.fm_hide").show();b.collapse=true;console.log("<<< laptop exit >>>")}});b.jRes.addFunc({breakpoint:"tab",enter:function(){hideZoomControl();$(".fm_left_content").hide();$(".fm_right_content").hide();b.collapse=true;b.setActiveTab(null);console.log(">>> tab enter <<<")},exit:function(){console.log("<<< tab exit >>>");showZoomControl();$(".fm_left_content").show();$(".fm_right_content").show();b.collapse=false}});b.jRes.addFunc({breakpoint:"phone",enter:function(){hideZoomControl();b.mobile=true;b.collapse=true;b.setActiveTab(null);$(".fm_show").hide();$(".fm_left_content").hide();$(".fm_right_content").hide();console.log(">>> phone enter <<<")},exit:function(){showZoomControl();b.mobile=false;b.collapse=false;$(".fm_show").show();$(".fm_left_content").show();$(".fm_right_content").show();console.log("<<< phone exit >>>")}})};this.setBindings=function(){$(".fm_find_me").click(function(){if($(this).hasClass("fm_on")){$(this).removeClass("fm_on")}else{res.findMe();$(this).addClass("fm_on")}});$(".fm_close").click(function(){if($(this).hasClass("fm_hide")){$(this).hide()}$(this).parent().hide();if(b.collapse){b.setActiveTab(null)}});$(".fm_basemap_trigger").click(function(a){a.preventDefault();if(b.collapse){b.setActiveTab(null);$(".fm_right_content").hide()}$(".fm_measurement").hide();$(".fm_identify").hide();$(".fm_navegacion").hide();$(".fm_basemap_list").toggle();return false});$(".fm_measure_trigger").click(function(a){a.preventDefault();if(b.collapse){b.setActiveTab(null);$(".fm_right_content").hide()}$(".fm_basemap_list").hide();$(".fm_identify").hide();$(".fm_navegacion").hide();$(".fm_measurement").toggle();return false});$(".fm_identify_trigger").click(function(a){a.preventDefault();if(b.collapse){b.setActiveTab(null);$(".fm_right_content").hide()}$(".fm_measurement").hide();$(".fm_basemap_list").hide();$(".fm_navegacion").hide();$(".fm_identify").toggle();return false});$(".fm_navegacion_trigger").click(function(a){a.preventDefault();if(b.collapse){b.setActiveTab(null);$(".fm_right_content").hide()}$(".fm_measurement").hide();$(".fm_basemap_list").hide();$(".fm_navegacion").toggle();$(".fm_identify").hide();return false});$(".fm_basemap_list").on("click","a",null,function(d){d.preventDefault();var a=this.getAttribute("data-name");setBasemap(a);$(".fm_basemap_list").toggle();b.setActiveTab(null);return false});$(".fm_share_trigger").click(function(){b.generateEmbedCode()});$(".fm_trigger").click(function(d){d.preventDefault();b.setActiveTab(this);var a=$(this).data("panel");b.showPanel(a)})};this.setActiveTab=function(a){$(".fm_button").each(function(){$(this).removeClass("fm_button_active")});if(a){$(a).addClass("fm_button_active")}};this.showPanel=function(a){$(".fm_right_content").show();if(b.collapse){$(".fm_right_content").find(".fm_close").show()}$(".fm_panel").hide();var a="."+a;$(a).show()};this.populateMapInfo=function(a){document.title=a.title;$(".fm_title_bar").html(a.title);var d="Map Creator: "+a.owner;$(".fm_description").html(a.description+"<p>"+d+"</p>")};this.showCoords=function(a){try{var g=esri.geometry.webMercatorToGeographic(a.mapPoint||a);if(g===null||g===undefined){return}var h="<b>Lat:</b> "+Math.abs(g.y.toFixed(2))+"°"+((g.y<0)?"S":"N")+"&nbsp;&nbsp;<b>Lon:</b> "+Math.abs(g.x.toFixed(2))+"°"+((g.x<0)?"W":"E");$(".fm_coordsinfo").html(h)}catch(e){console.log(e)}};this.updateScaleInfo=function(a,d){$(".fm_scaleinfo").html("<b>Escala:</b> 1 <b>:</b> "+a);$(".fm_zoomlevelinfo").html("<b>Zoom:</b> "+d)};this.embedSetup=function(){console.log("styling page for embeding");$("header").hide();$("footer").hide();if(b.mobile){$(".fm_container_main").css("top","0px")}else{$("nav").css("top","0px");$(".fm_container_main").css("bottom","0px").css("top","2.2em")}};this.generateEmbedCode=function(){var d=window.location.href;var a="<iframe src='"+d+"' style='border:0px  none;' name='responsiveViewer' scrolling='no' frameborder='0' marginheight='0px' marginwidth='0px' height='60px' width='468px'></iframe>";$(".fm_embed_code").html(a)};this.showLoading=function(){console.log("show loading")};this.hideLoading=function(){console.log("hide loading")};this.findMe=function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(a){if(map&&a&&a.coords){var f=esri.geometry.geographicToWebMercator(new esri.geometry.Point(a.coords.longitude,a.coords.latitude));if(a.accuracy<10000){map.centerAndZoom(f,16)}else{map.centerAndZoom(f,14)}var e=new esri.Graphic(f,new esri.symbol.PictureMarkerSymbol("images/i_target.png",38,38));b.animateMapSymbol(e)}},function(a){console.log(a);$(".fm_find_me").removeClass("fm_on")})}};this.animateMapSymbol=function(i){var k=1;var l=i.symbol.color;var j=i.geometry.type;var g=i.symbol;if(j=="extent"){g.outline.color.a=k;g.color.a=0}else{g.color.a=k}map.graphics.add(i);var a=setInterval(function(){if(j!="extent"){g.setColor(new dojo.Color([l.r,l.g,l.b,k]))}if(g.outline){var c=g.outline.color;g.outline.setColor(new dojo.Color([c.r,c.g,c.b,k]))}i.setSymbol(g);if(k<0.01){clearInterval(a);map.graphics.remove(i)}k-=0.01},20)};this.initApp=function(){b.setBindings();b.generateEmbedCode();b.setResponsive();$("#tabs1").tabs();$("#tabs2").tabs();$(".fm_measurement").draggable({cursor:"move"});$(".fm_identify").draggable({cursor:"move"});$(".fm_navegacion").draggable({cursor:"move"});$(".fm_basemap_list").draggable({cursor:"move"});$(".fm_description").show();if(!(b.collapse)){b.setActiveTab(".fm_details_trigger")}}}$(document).ready(function(){res=new responsive();res.initApp()});